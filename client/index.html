<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telegram Chat</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ -->
        <div id="loading" class="loading">
            <div style="text-align: center; padding: 40px;">
                <div style="font-size: 24px; margin-bottom: 20px;">üí¨</div>
                <div>–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–∞...</div>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫—Ä—ã—Ç —Å–Ω–∞—á–∞–ª–∞) -->
        <div id="chat-interface" style="display: none; height: 100%;">
            <!-- –®–∞–ø–∫–∞ -->
            <header class="header">
                <div class="header-left">
                    <div class="header-title">üí¨ –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</div>
                    <div class="online-indicator">
                        <span class="online-dot"></span>
                        <span id="online-count">1 –æ–Ω–ª–∞–π–Ω</span>
                    </div>
                </div>
                <button class="menu-btn" onclick="chatApp.toggleMenu()">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </header>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="messages-container" id="messages-container">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å -->
            </div>
            
            <!-- –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ -->
            <div class="input-panel">
                <div class="input-wrapper">
                    <textarea 
                        id="message-input" 
                        placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        rows="1"
                        oninput="chatApp.adjustTextarea(this)"
                        onkeydown="chatApp.handleKeyDown(event)"
                    ></textarea>
                    <button class="send-btn" onclick="chatApp.sendMessage()" id="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="media-buttons">
                    <button class="media-btn" onclick="chatApp.attachPhoto()" title="–§–æ—Ç–æ">
                        <i class="fas fa-camera"></i>
                    </button>
                    <button class="media-btn" onclick="chatApp.attachVoice()" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="media-btn" onclick="chatApp.showEmojiPicker()" title="–≠–º–æ–¥–∑–∏">
                        <i class="far fa-smile"></i>
                    </button>
                </div>
            </div>
            
            <!-- –ú–µ–Ω—é -->
            <div class="menu-overlay" id="menu-overlay" onclick="chatApp.closeMenu()">
                <div class="menu-content" onclick="event.stopPropagation()">
                    <div class="menu-header">
                        <img id="user-avatar" src="" class="user-avatar" alt="–ê–≤–∞—Ç–∞—Ä">
                        <div class="user-info">
                            <h3 id="user-name"></h3>
                            <p id="user-username"></p>
                        </div>
                    </div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="chatApp.showProfile()">
                            <span><i class="fas fa-user"></i></span>
                            <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                        </div>
                        <div class="menu-item" onclick="chatApp.showParticipants()">
                            <span><i class="fas fa-users"></i></span>
                            <span>–£—á–∞—Å—Ç–Ω–∏–∫–∏</span>
                        </div>
                        <div class="menu-item" onclick="chatApp.showSettings()">
                            <span><i class="fas fa-cog"></i></span>
                            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                        <div class="menu-item" onclick="chatApp.clearChat()">
                            <span><i class="fas fa-trash"></i></span>
                            <span>–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç</span>
                        </div>
                        <div class="menu-item logout" onclick="chatApp.logout()">
                            <span><i class="fas fa-sign-out-alt"></i></span>
                            <span>–í—ã–π—Ç–∏</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –≠–º–æ–¥–∑–∏ –ø–∞–Ω–µ–ª—å -->
            <div id="emoji-picker" style="display: none; position: absolute; bottom: 80px; right: 20px; background: #2d2d2d; border-radius: 12px; padding: 12px; z-index: 100;"></div>
            
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <div id="notifications"></div>
        </div>
    </div>
    
    <script src="/static/app.js"></script>
</body>
</html>